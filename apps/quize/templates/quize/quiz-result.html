{% extends "attempt-base.html" %}
{% load static %}
{% block content %}

<div class="nk-content-wrap">

    <div class="container text-center">
        <img src="{% static 'assets/images/logo.png' %}" alt="">

        <div class="mt-5">
            <h2 class="text-secondary my-4">Congratulations!</h2>
            <h3 class="text-primary my-4">Thank you for taking the quiz!</h3>
            <p class="text-muted mb-4">Your results are being generated. Please wait a moment...</p>
            
            <!-- Bootstrap 5 loader animation and status messages -->
            <div id="loader-container">
                <!-- Bootstrap 5 Spinner -->
                <div class="spinner-border text-primary" role="status" style="width: 2rem; height: 2rem;">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <div id="status-message" class="mt-3">
                    <p>Evaluating your responses...</p>
                </div>
            </div>

            <div id="generated-output" class="mt-5" style="display:none;">
                <h4>Your AI-generated result:</h4>
                <p>Your personalized blueprint is ready! Check your results below:</p>
                <div id="ai-result">
                    <!-- Placeholder for AI-generated output -->
                    <p>Loading your result...</p>
                </div>
            </div>
        </div>
    </div>

</div>

<script>
    $(document).ready(function() {
        // Simulate the step-by-step loading process
        const messages = [
            "Evaluating your responses...",
            "Calculating your score...",
            "Generating your personalized blueprint...",
            "Preparing your AI-generated result..."
        ];

        let step = 0;

        // Function to update the status messages
        function updateStatus() {
            if (step < messages.length) {
                $('#status-message').html('<p>' + messages[step] + '</p>');
                step++;
            } else {
                // Once the steps are done, hide the loader and show the AI result
                $('#loader-container').hide();
                $('#generated-output').show();
                $('#ai-result').html("<p>Your AI-generated blueprint is now ready. Thank you for your patience!</p>");
            }
        }

        // Start the step-by-step status update every 3 seconds
        setInterval(updateStatus, 3000);
    });
</script>

{% endblock %}
